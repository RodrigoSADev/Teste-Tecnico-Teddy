<section class="container">
  <app-header [username]="username" />

  <main class="main-content">
    <div class="clients-header">
      <p class="clients-header-title">
        <b>{{ clients().length }}</b> clientes encontrados:
      </p>
      <div class="pagination-info">
        Clientes por página:
        <select
          [(ngModel)]="clientsPerPage"
          (ngModelChange)="onClientsPerPageChange($event)"
          class="page-select"
        >
          <option value="16">16</option>
          <option value="32">32</option>
        </select>
      </div>
    </div>

    <div class="clients-grid">
      @for (client of clients(); track client.id) {
      <div class="client-card">
        <div class="client-info">
          <h3>{{ client.name }}</h3>
          <p>
            Salário: {{ client.salary | currency : "BRL" : "symbol" : "1.2-2" }}
          </p>
          <p>
            Empresa:
            {{
              client.companyValuation | currency : "BRL" : "symbol" : "1.2-2"
            }}
          </p>
        </div>
        <div class="client-actions">
          <button
            class="btn-action"
            (click)="onSelectClient(client)"
            [disabled]="isSelected(client)"
          >
            <img src="assets/add.png" alt="Adicionar" />
          </button>
          <button class="btn-action" (click)="openModalEditClient(client)">
            <img src="assets/edit.png" alt="Editar" />
          </button>
          <button class="btn-action" (click)="openModalDeleteClient(client)">
            <img src="assets/delete.png" alt="Excluir" />
          </button>
        </div>
      </div>
      }
    </div>

    <button class="btn-create-client" (click)="openModalCreateClient()">
      Criar cliente
    </button>

    <app-pagination
      [currentPage]="currentPage()"
      [totalItems]="totalPages() * clientsPerPage()"
      [itemsPerPage]="clientsPerPage()"
      (pageChange)="onPageChange($event)"
    >
    </app-pagination>

    <app-modal
      #clientModal
      [type]="modalType"
      [client]="selectedClient()"
      (save)="onSaveClient($event)"
      (delete)="onDeleteClient($event)"
      (cancel)="onModalCancel()"
    ></app-modal>
  </main>
</section>
